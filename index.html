<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Chatbot Solicitud</title>
  </head>
  <body>
    <div
      id="chat"
      style="
        max-width: 600px;
        margin: 3rem auto;
        font-family: Arial, Helvetica, sans-serif;
      "
    >
      <div id="messages"></div>
      <input id="input" placeholder="Escribe aquí..." style="width: 80%" />
      <button id="send">Enviar</button>
    </div>

    <script>
      const sessionId = Math.random().toString(36).slice(2, 10);
      document.getElementById("send").onclick = async () => {
        const msg = document.getElementById("input").value;
        if (!msg) return;
        append("Tú: " + msg);
        document.getElementById("input").value = "";
        const res = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ session_id: sessionId, message: msg }),
        });
        const j = await res.json();
        append("Bot: " + j.reply.replace(/\n/g, "<br>"));
      };
      function append(t) {
        const d = document.createElement("div");
        d.innerHTML = t;
        document.getElementById("messages").appendChild(d);
      }
    </script>
  </body>
</html>
